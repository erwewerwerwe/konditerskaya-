{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'orders/css/order_detail.css' %}">

<div class="order-detail-container">
    <div class="order-header">
        <h1 class="order-title">Заказ #{{ order.id }}</h1>
        <span class="order-status">{{ order.get_status_display }}</span>
    </div>

    <div class="order-section">
        <h2 class="section-title">Информация о заказе</h2>
        <div class="order-info-grid">
            <div class="info-item">
                <span class="info-label">Имя</span>
                <span class="info-value">{{ order.first_name }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Фамилия</span>
                <span class="info-value">{{ order.last_name }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Отчество</span>
                <span class="info-value">{{ order.patronymic }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Телефон</span>
                <span class="info-value">{{ order.phone }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Email</span>
                <span class="info-value">{{ order.email }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Адрес доставки</span>
                <span class="info-value">{{ order.address }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Дата доставки</span>
                <span class="info-value">{{ order.delivery_date }} в {{ order.delivery_time }}</span>
            </div>
            {% if order.comments %}
            <div class="info-item">
                <span class="info-label">Комментарий</span>
                <span class="info-value">{{ order.comments }}</span>
            </div>
            {% endif %}
        </div>
    </div>

    <div class="order-section">
        <h2 class="section-title">Состав заказа</h2>
        <table class="order-items">
            <thead>
            <tr>
                <th>Товар</th>
                <th>Количество</th>
                <th>Цена</th>
                <th>Сумма</th>
            </tr>
            </thead>
            <tbody>
            {% for item in order.items.all %}
            <tr>
                <td>
                    {% if item.product %}
                    {{ item.product.name }}
                    {% else %}
                    {{ item.custom_name }}
                    {% endif %}
                </td>
                <td>{{ item.quantity }} шт.</td>
                <td>{{ item.price }} ₽</td>
                <td>{{ item.get_cost }} ₽</td>
            </tr>
            {% endfor %}
            </tbody>

        </table>
    </div>

    <div class="order-totals">
        <div class="total-row">
            <span>Сумма заказа:</span>
            <span>{{ order.total_price }} ₽</span>
        </div>
        <div class="total-row">
            <span>Стоимость доставки:</span>
            <span>{{ order.delivery_cost }} ₽</span>
        </div>
        <div class="total-row">
            <strong>Итого к оплате:</strong>
            <strong>{{ order.get_total_cost }} ₽</strong>
        </div>
    </div>

    <a href="{% url 'index' %}" class="back-link">Вернуться в магазин</a>
</div>
{% endblock %}